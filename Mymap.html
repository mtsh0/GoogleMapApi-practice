<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>Mymap</title>
  <style>
    #target {
      width: 550px;
      height: 200px;
    }

  </style>
</head>
<body>
  <div id="target"></div>
  <input type="text" id="address">
  <button id="search">Search</button>
  <script src="https://maps.googleapis.com/maps/api/js?language=ja&region=JP&key=AIzaSyA9LcEu99UT8OzJ2PcmLaE9K0UXrt1VdIk&callback=initMap" async defer></script>
  <script>
    function initMap(){
      'use strict';

      var target = document.getElementById('target');
      // Geocoding: Address -> LatLng(住所を緯度経度に変換する)
      // Reverse Geocording: LatLng -> Address(緯度経度から住所を割り出す)

      // Geocoder(Reverse Feocoder)用のインスタンスの生成
      var geocoder = new google.maps.Geocoder();

      // idがsearchのhtml用を取得してその取得した要素をクリックした時に動作させる
      document.getElementById('search').addEventListener('click', function(){
        geocoder.geocode({
          // フォームに住所を渡す
          address: document.getElementById('address').value

        }, function(results, status)/*引数に結果と処理の結果が返却される*/{
          // ステータスが未成功の場合
          if (status !== 'OK') {
            // アラートをだす
            alert('Failed:' + status);
            // 処理を中断する
            return;
          }

          // ステータスが成功の場合results[0].geometry.locationに緯度経度の情報が入る
          if (results[0]) {
            // 結果をmapに表示する
            new google.maps.Map(target, {
              center: results[0].geometry.location,
              zoom: 14
            });
          } else {
            alert('No results found');
            return;
          }
        });
      });


    }
  </script>
</body>
</html>
